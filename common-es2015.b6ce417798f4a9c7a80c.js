(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{CUGa:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var o=t("fXoL"),n=t("3Pt+"),r=t("AytR"),i=t("tk/3");let s=(()=>{class e{constructor(e){this.http=e}getListaFranqueado(){return this.http.get(`${r.a.API.URL}${r.a.API.Routes.adm.listaPessoaFranqueado}`)}}return e.\u0275fac=function(a){return new(a||e)(o.Vb(i.b))},e.\u0275prov=o.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=t("/SA8"),c=t("ZOsW");let u=(()=>{class e extends n.r{constructor(e,a,t,n){super(e,a),this.admService=t,this._helperService=n,this.handleChangeEmit=new o.n}ngOnInit(){}ngAfterViewInit(){this.admService.getListaFranqueado().subscribe(e=>{var a;this.items=e.Data;const t=this._helperService.getUserInfo();if(1===this.items.length)this.value=e.Data[0].codigo,this.handleChangeEmit.emit(e.Data[0]),t&&localStorage.setItem("unity",JSON.stringify({usuario:t.CodigoUsuario,franqueado:e.Data[0]}));else{this.items.unshift({auxiliar:null,codigo:-1,descricao:"TODOS",valor:0});const e=localStorage.getItem("unity")?JSON.parse(localStorage.getItem("unity")):null;this.checkUnityOfSelectedUser(e,t)?this.items.find(a=>{var t;return a.codigo==(null===(t=null==e?void 0:e.franqueado)||void 0===t?void 0:t.codigo)})&&(this.value=null===(a=null==e?void 0:e.franqueado)||void 0===a?void 0:a.codigo,this.handleChangeEmit.emit(null==e?void 0:e.franqueado)):(localStorage.removeItem("unity"),this.value=-1,this.handleChangeEmit.emit({auxiliar:null,codigo:-1,descricao:"TODOS",valor:0}))}})}checkUnityOfSelectedUser(e,a){return e&&e.usuario==a.CodigoUsuario}clearItemSelected(){localStorage.removeItem("unity")}handleChangeValue(e){const a=this._helperService.getUserInfo();localStorage.setItem("unity",JSON.stringify({usuario:a.CodigoUsuario,franqueado:e})),this.handleChangeEmit.emit(e)}set value(e){e!==this.innerValue&&(this.innerValue=e,this.onChange(e))}get value(){return this.innerValue}compareFn(e,a){return e&&a?e.id===a.id:e===a}writeValue(e){this.value=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return e.\u0275fac=function(a){return new(a||e)(o.Lb(o.D),o.Lb(o.l),o.Lb(s),o.Lb(d.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["ft-combo-franquias"]],outputs:{handleChangeEmit:"handleChangeEmit"},features:[o.yb([{provide:n.i,useExisting:e,multi:!0}]),o.wb],decls:4,vars:4,consts:[[1,"form-group"],[3,"items","bindLabel","bindValue","ngModel","ngModelChange","change","clear"]],template:function(e,a){1&e&&(o.Rb(0,"div",0),o.Rb(1,"label"),o.Cc(2,"Unidade *"),o.Qb(),o.Rb(3,"ng-select",1),o.Zb("ngModelChange",(function(e){return a.value=e}))("change",(function(e){return a.handleChangeValue(e)}))("clear",(function(){return a.clearItemSelected()})),o.Qb(),o.Qb()),2&e&&(o.zb(3),o.hc("items",a.items)("bindLabel","descricao")("bindValue","codigo")("ngModel",a.value))},directives:[c.a,n.k,n.m],styles:[""]}),e})()},PHdk:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var o=t("fXoL"),n=t("ofXK");function r(e,a){if(1&e&&o.Mb(0,"i"),2&e){const e=o.bc(2);o.Bb("mr-2 fw-600 "+e.icon)}}function i(e,a){if(1&e&&(o.Rb(0,"span",3),o.Ac(1,r,1,2,"i",4),o.Cc(2),o.Qb()),2&e){const e=o.bc();o.zb(1),o.hc("ngIf",e.icon),o.zb(1),o.Ec("",e.title," ")}}const s=["*"];let d=(()=>{class e{constructor(){this.title="",this.icon=""}ngOnInit(){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=o.Fb({type:e,selectors:[["ft-card"]],inputs:{title:"title",icon:"icon"},ngContentSelectors:s,decls:4,vars:1,consts:[[1,"card"],["class","card-title",4,"ngIf"],[1,"card-body"],[1,"card-title"],[3,"class",4,"ngIf"]],template:function(e,a){1&e&&(o.gc(),o.Rb(0,"div",0),o.Ac(1,i,3,2,"span",1),o.Rb(2,"div",2),o.fc(3),o.Qb(),o.Qb()),2&e&&(o.zb(1),o.hc("ngIf",a.title))},directives:[n.m],styles:[".card[_ngcontent-%COMP%]{margin:0;box-shadow:0 4px 6px 0 rgba(31,70,88,.04);border-radius:10px;width:auto;border:1px solid #dbe9f5}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{display:flex;align-items:baseline;padding:14px 16px;border-bottom:1px solid rgba(219,233,245,.6);font-size:18px;font-family:Circular std,sans-serif;color:#172b3e;font-weight:700}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{text-align:center}"]}),e})()},iCHY:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var o=t("lJxs"),n=t("AytR"),r=t("fXoL"),i=t("tk/3");let s=(()=>{class e{constructor(e){this.http=e,this.escala=1e3}getFaturamento(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.faturamento}?ano=${e.ano}&mes=${e.mes}&codigoFranqueado=${e.codigoFranqueado}`).pipe(Object(o.a)(e=>e.Data||{}))}getVendasTipoPagamento(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasTipoPagamento}?ano=${e.ano}&mes=${e.mes}&codigoFranqueado=${e.codigoFranqueado}`)}getVendasMensal(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasMensal}?ano=${e.ano}&mes=${e.mes}&codigoFranqueado=${e.codigoFranqueado}&escala=${this.escala}`).pipe(Object(o.a)(e=>e.Data.Vendas.reduce((a,t)=>(a.push({Mes:`${2==t.Mes.toString().length?t.Mes.toString():`0${t.Mes.toString()}`}/${t.Ano.toString().substring(2,4)}`,Valor:t.Venda,Media:this.dividirPelaEscala(e.Data.Media)}),a),[])))}getVendasAcumuladas(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasAcumuladas}?ano=${e.ano}&mes=${e.mes}&codigoFranqueado=${e.codigoFranqueado}&escala=${this.escala}`)}getVendasTopProdutos(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasTopProdutos}?ano=${e.ano}&mes=${e.mes}&codigoFranqueado=${e.codigoFranqueado}`).pipe(Object(o.a)(e=>e.Data||[]))}getVendasHistorico(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasHistorico}?ano=${e.ano}&mes=${e.mes}&codigoFranqueado=${e.codigoFranqueado}&escala=${this.escala}`).pipe(Object(o.a)(e=>{const a=e.Data.Vendas.reduce((a,t)=>(a.push({Mes:t.Mes,VendaAnoAnterior:t.VendaAnoAnterior,VendaAnoAtual:t.VendaAnoAtual,MediaAnoAnterior:this.dividirPelaEscala(e.Data.MediaAnoAnterior)}),a),[]);return{AnoAnterior:e.Data.AnoAnterior,AnoAtual:e.Data.AnoAtual,Vendas:a}}))}getVendasPorCategoriaProduto(e,a,t){const r=new URLSearchParams({dataInicio:e,dataFim:a,codigoFranqueado:t.toString()}).toString();return console.log(r),this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasPorCategoriaProduto}?${r}`).pipe(Object(o.a)(e=>(e.Data.map(e=>(e.Categoria?e.Expanded=!0:e.Visible=!0,e)),e.Data)))}getVendasFranqueado(e,a,t){const r=new URLSearchParams({dataInicio:e,dataFim:a,codigoFranqueado:t.toString()}).toString();return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasFranqueado}?${r}`).pipe(Object(o.a)(e=>e.Data?e.Data.reduce((e,a)=>(e.push({Cliente:{CPFCliente:a.CPFCliente,NomeCliente:a.NomeCliente,NumeroNF:a.NumeroNF,Vendedor:a.Vendedor,Expanded:!1},CodigoDocumento:a.CodigoDocumento,Data:a.Data,ValorBruto:a.ValorBruto,ValorDesconto:a.ValorDesconto,ValorLiquido:a.ValorLiquido,ResultadoHorizontal:a.ResultadoHorizontal,Total:a.Total}),e),[]):[]))}getVendasFranqueadoDetalhado(e){return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasFranqueadoDetalhado}?codigoDocumento=${e}`)}getVendasConsumoInterno(e,a,t){const r=new URLSearchParams({dataInicio:e,dataFim:a,codigoFranqueado:t.toString()}).toString();return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasConsumoInterno}?${r}`).pipe(Object(o.a)(e=>e.Data||[]))}getVendasConsumoInternoDetalhado(e,a,t,r){const i=new URLSearchParams({dataInicio:e,dataFim:a,codigoFranqueado:t.toString(),codigoRecebedor:r.toString()}).toString();return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasConsumoInternoDetalhado}?${i}`).pipe(Object(o.a)(e=>e.Data||[]))}getVendasPorHora(e,a,t){const r=new URLSearchParams({dataInicio:e,dataFim:a,codigoFranqueado:t.toString()}).toString();return this.http.get(`${n.a.API.URL}${n.a.API.Routes.dashboards.franqueados.vendasPorHora}?${r}`).pipe(Object(o.a)(e=>e.Data||[]))}dividirPelaEscala(e){return this.escala?e/this.escala:e}}return e.\u0275fac=function(a){return new(a||e)(r.Vb(i.b))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);