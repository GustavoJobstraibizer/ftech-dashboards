<ft-page-title [title]="'Indicadores da Balança'"></ft-page-title>

<div class="d-none d-sm-none d-md-block d-lg-block d-xl-block">
  <ft-periodo
    #filters
    [getTodayDate]="true"
    (periodoFilterEmit)="filtroPeriodo($event)"
  ></ft-periodo>
</div>

<ft-button-filter
  (filteredValueEmit)="filtroPeriodo($event)"
  [titleModalFilter]="
    'Selecione um período para visualizar o resumo de indicadores da Balança'
  "
></ft-button-filter>

<ft-resumo [resumoBalancaTotal]="resumoBalancaTotal"></ft-resumo>

<p-table [value]="listResult" styleClass="p-datatable-responsive-demo" [scrollable]="true" scrollHeight="280px">
  <ng-template pTemplate="header">
    <tr>
      <th>Caixa</th>
      <th>Pesado(KG)</th>
      <th>Estorno(KG)</th>
      <th>Estorno(%)</th>
      <th>Sistema fechado(KG)</th>
      <th>Pesado(R$)</th>
      <th>Estorno(R$)</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-resumo>
    <tr [ngClass]="{ 'p-footer-total': resumo?.UltimaLinha }">
      <td>
        <span class="p-column-title">Caixa</span>
        <span class="p-column-value">{{ resumo?.DescricaoCaixa }}</span>
      </td>
      <td class="c-pointer" (click)="openModalDetalhesBalanca(eFiltroTipo.VENDA)">
        <span class="p-column-title">Pesado(KG)</span>
        <span class="p-column-value" [tooltip]="verDetalhesTooltip" placement="bottom">{{
          resumo.VolumePeso | number: '1.2-3'
        }}</span>
      </td>
      <td class="c-pointer" (click)="openModalDetalhesBalanca(eFiltroTipo.ESTORNO)">
        <span class="p-column-title">Estorno(KG)</span>
        <span class="p-column-value" [tooltip]="verDetalhesTooltip" placement="bottom">{{
          resumo.VolumeEstorno | number: '1.3-3'
        }}</span>
      </td>
      <td class="c-pointer" (click)="openModalDetalhesBalanca(eFiltroTipo.ESTORNO)">
        <span class="p-column-title">Estorno(%)</span>
        <span class="p-column-value" [tooltip]="verDetalhesTooltip" placement="bottom"
          >{{ resumo.PercentualVolumeEstorno | percent : '3.1-1' }}</span
        >
      </td>
      <td class="c-pointer" (click)="openModalDetalhesBalanca(eFiltroTipo.OFFLINE)">
        <span class="p-column-title">Sistema fechado(KG)</span>
        <span class="p-column-value" [tooltip]="verDetalhesTooltip" placement="bottom">{{
          resumo.VolumeSistemaOffline | number: '1.3-3'
        }}</span>
      </td>
      <td class="c-pointer" (click)="openModalDetalhesBalanca(eFiltroTipo.VENDA)">
        <span class="p-column-title">Pesado(R$)</span>
        <span class="p-column-value" [tooltip]="verDetalhesTooltip" placement="bottom">{{
          resumo.ValorEstorno | number: '1.2-2'
        }}</span>
      </td>
      <td class="c-pointer" (click)="openModalDetalhesBalanca(eFiltroTipo.ESTORNO)">
        <span class="p-column-title">Estorno(R$)</span>
        <span class="p-column-value" [tooltip]="verDetalhesTooltip" placement="bottom">{{
          resumo.ValorEstorno | number: '1.2-2'
        }}</span>
      </td>
    </tr>
  </ng-template>
</p-table>
<ng-template #verDetalhesTooltip>Clique para mais detalhes</ng-template>
