{"version":3,"sources":["webpack:///src/app/routes/home/home.module.ts","webpack:///src/app/routes/home/home/home.component.ts","webpack:///src/app/routes/home/home/home.component.html"],"names":["routes","path","component","HomeModule","forChild","imports","declarations","exports","HomeComponent","_helperService","franqueadoService","codigoFranqueado","codigoFranquia","carregarValores","carregarHistorico","carregaVendasAcumuladas","carregaTopProdutos","carregarVendasMensal","dateReference","Date","fullYear","getFullYear","filtrosPesquisa","month","getReferenceMonth","onScrollEvent","checkTheTopOfCardChart","window","addEventListener","elementId","control","document","querySelector","getBoundingClientRect","top","innerHeight","franqueado","codigo","removeEventListener","DECREMENT","ano","toString","mes","getMonth","Object","assign","INCREMENT","decrementMonthReference","incrementMonthReference","getCodigoFranqueado","selector","templateUrl","styleUrls"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["import { SharedModule } from './../../shared/shared.module';\nimport { NgModule } from '@angular/core';\nimport { HomeComponent } from './home/home.component';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [{ path: '', component: HomeComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes), SharedModule],\n  declarations: [HomeComponent],\n  exports: [RouterModule],\n})\nexport class HomeModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FranqueadosService } from './../../../core/services/dashboards/franqueados.service';\nimport { EDateAction, HelperService } from './../../../core/services/helper.service';\nimport { IListaFranqueadoPerfil } from './../../../shared/interfaces/lista-franqueado-perfil.interface';\nimport { FiltroFranqueado } from './../../../shared/models/filtro-indicadores.model';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss'],\n})\nexport class HomeComponent implements OnInit, OnDestroy {\n  private onScrollEvent\n  public month: string\n  public codigoFranqueado = 0\n  private codigoFranquia = 0\n\n  public carregarValores = {\n    carregarHistorico: false,\n    carregaVendasAcumuladas: false,\n    carregaTopProdutos: false,\n    carregarVendasMensal: true,\n  }\n\n  public dateReference = new Date()\n  public fullYear = this.dateReference.getFullYear()\n  public filtrosPesquisa: FiltroFranqueado = new FiltroFranqueado(0)\n\n  constructor(\n    private _helperService: HelperService,\n    public franqueadoService: FranqueadosService\n  ) {\n    this.month = this._helperService.getReferenceMonth(this.dateReference)\n\n    this.onScrollEvent = () => {\n      this.checkTheTopOfCardChart('historicoVendas', 'carregarHistorico')\n      this.checkTheTopOfCardChart('vendasAcumuladas', 'carregaVendasAcumuladas')\n      this.checkTheTopOfCardChart('topProdutos', 'carregaTopProdutos')\n      this.checkTheTopOfCardChart('vendasMensal', 'carregarVendasMensal')\n    }\n\n    window.addEventListener('scroll', this.onScrollEvent, false)\n  }\n\n  checkTheTopOfCardChart(elementId: string, control: string) {\n    if (\n      document.querySelector(`#${elementId}`).getBoundingClientRect().top <\n      window.innerHeight\n    ) {\n      if (!this.carregarValores[control]) {\n        this.carregarValores[control] = true\n      }\n    }\n  }\n\n  getCodigoFranqueado(franqueado: IListaFranqueadoPerfil) {\n    // if (franqueado) {\n    this.codigoFranqueado = franqueado?.codigo\n    this.filtrosPesquisa.codigoFranqueado = franqueado?.codigo\n    // }\n  }\n\n  ngOnInit() {}\n\n  ngOnDestroy() {\n    window.removeEventListener('scroll', this.onScrollEvent, false)\n  }\n\n  decrementMonthReference() {\n    this.month = this._helperService.getReferenceMonth(this.dateReference, EDateAction.DECREMENT)\n    this.fullYear = this.dateReference.getFullYear()\n    this.filtrosPesquisa.ano = this.dateReference.getFullYear().toString()\n    this.filtrosPesquisa.mes = (this.dateReference.getMonth() + 1).toString()\n    this.filtrosPesquisa = Object.assign({}, this.filtrosPesquisa)\n  }\n\n  incrementMonthReference() {\n    this.month = this._helperService.getReferenceMonth(this.dateReference, EDateAction.INCREMENT)\n    this.fullYear = this.dateReference.getFullYear()\n    this.filtrosPesquisa.ano = this.dateReference.getFullYear().toString()\n    this.filtrosPesquisa.mes = (this.dateReference.getMonth() + 1).toString()\n    this.filtrosPesquisa = Object.assign({}, this.filtrosPesquisa)\n  }\n}\n","<div class=\"home-container\">\n  <div class=\"d-flex flex-column\">\n    <h2 class=\"home-title text-center\">\n      Indicadores do franqueado - Mês de referência\n      <!-- <strong>{{ month }}</strong> -->\n    </h2>\n\n    <div class=\"filter-month-reference\">\n      <div class=\"input-group d-flex justify-content-center\">\n        <div class=\"input-group-prepend\">\n          <button class=\"btn btn-primary filter-month-reference--btn-left\" type=\"button\" (click)=\"decrementMonthReference()\"><i class=\"far fa-arrow-alt-circle-left fa-lg\"></i></button>\n        </div>\n        <input type=\"text\" class=\"form-control filter-month-reference__input\" disabled [value]=\"month\">\n        <div class=\"input-group-prepend\">\n          <button class=\"btn btn-primary filter-month-reference--btn-right\" type=\"button\" (click)=\"incrementMonthReference()\"><i class=\"far fa-arrow-alt-circle-right fa-lg\"></i></button>\n        </div>\n      </div>\n    </div>\n\n    <hr class=\"w-100\" />\n\n    <div class=\"content-indicador\">\n      <ft-indicadores [(codigoFranqueado)]=\"codigoFranqueado\" [(filtrosPesquisa)]=\"filtrosPesquisa\"></ft-indicadores>\n\n      <div class=\"content-filter col-12 col-sm-12 col-md-8 col-lg-8 col-xl-4\">\n        <div\n          class=\"pl-0 pr-0 col-12 col-sm-12 col-md-8 col-lg-8 col-xl-12 ml-0 ml-md-2 ml-lg-2 ml-xl-2\"\n        >\n          <ft-combo-franquias\n            (handleChangeEmit)=\"getCodigoFranqueado($event)\"\n          ></ft-combo-franquias>\n        </div>\n        <!-- <ft-button-filter\n          class=\"btn-filter-custom\"\n          (handleClickEmit)=\"handleFilter()\"\n        ></ft-button-filter> -->\n      </div>\n    </div>\n  </div>\n\n  <section class=\"chart-container\">\n    <ft-card\n      [title]=\"'Vendas por tipo de pagamento'\"\n      id=\"tipoPagto\"\n      class=\"tipo-pagto\"\n    >\n      <chart-tipo-pagamento\n        [(codigoFranqueado)]=\"codigoFranqueado\"\n        [(filtrosPesquisa)]=\"filtrosPesquisa\"\n      ></chart-tipo-pagamento>\n    </ft-card>\n\n    <ft-card\n      title=\"Vendas Mensal {{\n        franqueadoService?.escala > 0\n          ? '(escala 1:' + (franqueadoService?.escala | number) + ')'\n          : ''\n      }}\"\n      id=\"vendasMensal\"\n      class=\"vendas-mensal\"\n    >\n      <chart-mensal\n        [carregarVendasMensal]=\"carregarValores.carregarVendasMensal\"\n        [(codigoFranqueado)]=\"codigoFranqueado\"\n        [(filtrosPesquisa)]=\"filtrosPesquisa\"\n      ></chart-mensal>\n    </ft-card>\n\n    <ft-card\n      title=\"Histórico de vendas {{\n        franqueadoService?.escala > 0\n          ? '(escala 1:' + (franqueadoService?.escala | number) + ')'\n          : ''\n      }}\"\n      id=\"historicoVendas\"\n      class=\"hist-vendas\"\n    >\n      <chart-historico\n        [carregarHistorico]=\"carregarValores.carregarHistorico\"\n        [(codigoFranqueado)]=\"codigoFranqueado\"\n        [(filtrosPesquisa)]=\"filtrosPesquisa\"\n      ></chart-historico>\n    </ft-card>\n\n    <ft-card\n      title=\"Vendas Acumuladas {{ fullYear }} {{\n        franqueadoService?.escala > 0\n          ? '(escala 1:' + (franqueadoService?.escala | number) + ')'\n          : ''\n      }}\"\n      id=\"vendasAcumuladas\"\n      class=\"vendas-acc\"\n    >\n      <chart-acumulados\n        [carregarVendasAcc]=\"carregarValores.carregaVendasAcumuladas\"\n        [(codigoFranqueado)]=\"codigoFranqueado\"\n        [(filtrosPesquisa)]=\"filtrosPesquisa\"\n      ></chart-acumulados>\n    </ft-card>\n\n    <ft-card\n      [title]=\"'Top 10 Produtos mais vendidos'\"\n      id=\"topProdutos\"\n      class=\"top-produtos\"\n    >\n      <chart-top-produtos\n        [carregarTopProdutos]=\"carregarValores.carregaTopProdutos\"\n        [(codigoFranqueado)]=\"codigoFranqueado\"\n        [(filtrosPesquisa)]=\"filtrosPesquisa\"\n      ></chart-top-produtos>\n    </ft-card>\n  </section>\n</div>\n"]}